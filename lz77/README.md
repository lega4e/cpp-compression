# LZ77

LZ77 — это алгоритм, основанный на поиске повторяющихся
последовательностей и заменой всех последующих ссылкой на предыдущие.

Для подробностей ипсользования программы вызовите `lz -h`.

Здесь представлена классическая реализация этого алгоритма за
исключением одного изменения: окно кодируемой последовательности не
может включать самый последний символ; это позволяет избавиться от
необходимости использования особого "нулевого" символа.

Закодированные данные представляют из себя последовательность из
элементов каждый по 3 байта, в которых первые 12 бит отвечает за
смещение относительно текущей позиции, указывающее на повторяющееся
место, следующие 4 бита — за длину повторяющейся последовательности,
и наконец, последние 8 бит содержат символ, непосредственно идущий
за повторяющейся последователностью. Более подробно про структуру
кодирования читайте в комментариях в исходном коде.

Выяснилось, что этот алгоритм, если использовать с широким буффером
(4096 символов) и окном кодирования в 15 символов, достаточно
ресурсозатратен на больших наборах данных. Так, например, для
кодирования библии на английском языке размером в 4123756 байт
потребовалось около 28 секунд даже с оптимизацией `-Ofast`. Несложно
вычислить, что сложность кодирования будет равна `O(n\*m\*k)`, где
`n` — длина кодируемой последовательности, `m` — длина буфера, а `k`
— длина скользящего окна. Хоть `m` и `k` в конечном варианте
алгоритма являются константами и временная сложность, следовательно,
получается линейной, это громадная константа `m*k` (в данном
конкретном случае равная 61440) сильно утяжеляет алгоритм.
